{"id":"NKFQ","dependencies":[{"name":"/Users/cjohnson/src/github/poor-richard/package.json","includedInParent":true,"mtime":1581697770850},{"name":"./dom-utils.js","loc":{"line":1,"column":58},"parent":"/Users/cjohnson/src/github/poor-richard/src/utils/modal.js","resolved":"/Users/cjohnson/src/github/poor-richard/src/utils/dom-utils.js"},{"name":"./google-analytics.js","loc":{"line":2,"column":28},"parent":"/Users/cjohnson/src/github/poor-richard/src/utils/modal.js","resolved":"/Users/cjohnson/src/github/poor-richard/src/utils/google-analytics.js"}],"generated":{"js":"var $NKFQ$exports={};function $NKFQ$export$openModal(t,e){var o=document.querySelector(t);if(o){$NKFQ$import$sendGAEvent({eventCategory:\"Modal interaction\",eventAction:\"Saw modal \".concat(e),nonInteraction:!0});var n=document.body.parentElement,a=o.querySelectorAll(\"[aria-label=close]\"),i=o.querySelectorAll(\".modal-background\"),r=o.querySelectorAll(\"input\"),$=o.querySelectorAll(\"form\");o.classList.add(\"is-active\"),$NKFQ$import$transition(o,\"fade-enter\",\"fade-enter-active\",500),n.classList.add(\"is-clipped\");var c=[$NKFQ$import$on(\"click\",a,l),$NKFQ$import$on(\"click\",i,l),$NKFQ$import$on(\"touchmove\",i,function(t){t.preventDefault()}),$NKFQ$import$on(\"keydown\",document,function(t){27===t.keyCode&&l()}),$NKFQ$import$on(\"focus\",r,function(t){$NKFQ$import$sendGAEvent({eventCategory:\"Modal interaction\",eventAction:\"Focus input\"})}),$NKFQ$import$on(\"submit\",$,function(t){$NKFQ$import$sendGAEvent({eventCategory:\"Modal interaction\",eventAction:\"Submit \".concat(e),transport:\"beacon\"}),\"newsletter\"===e&&$NKFQ$import$sendGAEvent({eventCategory:\"Newsletter signup\",eventAction:\"From modal CTA\",transport:\"beacon\"})})]}function l(){o.classList.remove(\"is-active\"),n.classList.remove(\"is-clipped\"),c.forEach(function(t){t()}),$NKFQ$import$sendGAEvent({eventCategory:\"Modal interaction\",eventAction:\"Dismiss modal \".concat(e)})}}function $NKFQ$export$addModal(){var t=!!window.location.href.match(/debug/),e=!!window.location.href.match(/debug=newsletter/),o=!!window.location.href.match(/debug=donate/),n=\"originated-from-mailchimp\",a=t?500:2e3,i=new Date,r=!0;$NKFQ$import$loadDate(\"last-visit\"),$NKFQ$import$loadDate(\"last-visit\",{useSession:!0});$NKFQ$import$storeDate(\"last-visit\",i),$NKFQ$import$storeDate(\"last-visit\",i,{useSession:!0}),$NKFQ$import$once(\"scroll\",[window],function(){window.location.pathname.match(/donate/)&&$NKFQ$import$storeDate(\"saw-donate-modal\",i),window.location.pathname.match(/newsletters/)&&$NKFQ$import$storeDate(\"saw-newsletter-modal\",i),$NKFQ$import$loadDate(\"saw-newsletter-modal\")&&(r=!1),window.location.href.match(/utm_source=email/)&&$NKFQ$import$storeDate(n,i),document.referrer.match(/campaign-archive/)&&$NKFQ$import$storeDate(n,i),$NKFQ$import$loadDate(n)&&(r=!1),document.body.dataset.modalExclude&&(r=!1),e&&(r=!0),o&&(r=!1),r&&window.setTimeout(function(){$NKFQ$import$storeDate(\"saw-newsletter-modal\",i),$NKFQ$export$openModal(\"#modal-newsletter\",\"newsletter\")},a)})}$parcel$require(\"NKFQ\",\"./dom-utils.js\"),$parcel$require(\"NKFQ\",\"./google-analytics.js\"),$NKFQ$exports.openModal=$NKFQ$export$openModal,$NKFQ$exports.addModal=$NKFQ$export$addModal;"},"sourceMaps":null,"error":null,"hash":"8327718c824bcd5ced0cbcaf1d4fd4a0","cacheData":{"env":{},"imports":{"$NKFQ$import$on":["./dom-utils.js","on"],"$NKFQ$import$once":["./dom-utils.js","once"],"$NKFQ$import$transition":["./dom-utils.js","transition"],"$NKFQ$import$loadDate":["./dom-utils.js","loadDate"],"$NKFQ$import$storeDate":["./dom-utils.js","storeDate"],"$NKFQ$import$sendGAEvent":["./google-analytics.js","sendGAEvent"]},"exports":{"openModal":"$NKFQ$export$openModal","addModal":"$NKFQ$export$addModal"},"wildcards":[],"sideEffects":true,"isES6Module":true}}