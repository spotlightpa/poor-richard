<!DOCTYPE html>
<html lang='{{ .Param "language-code" | default site.LanguageCode }}'>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>
    {{- with .Param "title-tag" -}}
      {{- . -}}
    {{- else -}}
      {{ .Title }} &middot; {{ .Site.Title }}
    {{- end -}}
  </title>

  {{ partialCached "header-static.html" . }}
  {{ partial "google-analytics-async.html" . }}

  <!-- Metadata -->
  {{ partial "meta.html" . }}

  {{ range .AlternativeOutputFormats }}
    <link
      rel="{{ .Rel }}"
      type="{{ .MediaType.Type }}"
      href="{{ .Permalink | safeURL }}"
      title="{{ $.Title }}"
    />
  {{ end }}
  {{ block "extra-head" . }}{{ end }}
</head>
{{ $pageCat := printf "%s:%s" (.Section | default .Type) .Kind }}
{{ if eq .Kind "home" }}{{ $pageCat = "home "}}{{ end }}
<body
  data-built-at='{{ now.Format "3:04pm MST, Mon. Jan 02, 2006" }}'
  data-ga-category='{{ $pageCat }}'
>
  {{ block "svg-resources" . }}{{ partialCached "svg-resources.html" . }}{{ end }}
  {{ block "nav" . }}{{ partial "nav.html" . }}{{ end }}
  {{ if .Param "banner-active" }}
    {{ partial "banner.html" . }}
  {{ end }}
  <main data-ga-action="Main section">
    {{ block "before-main" . }}{{ end }}
    {{ block "main" . }}
      {{ .Render "main" }}
    {{ end }}
    {{ block "extra-main" . }}{{ end }}
  </main>
  <footer data-ga-action="Page footer">
    {{ block "promo" . }}{{ end }}
    {{ block "footer" . }}{{ partial "footer.html" . }}{{ end }}
    {{ block "extra-footer" . }}{{ end }}
  </footer>
  {{ block "modal" . }}
    {{ if .Param "modal-exclude" | not }}
      {{ partial "modal-newsletter.html" . }}
    {{ end }}
  {{ end }}
  {{ partial "modal-search.html" . }}
  <script
    src='{{ partialCached "get-main-js.html" . }}'
    async
  ></script>
  <script nomodule>
    console.warn("could not load enhancements");
    document.body.classList.add("has-old-js");
  </script>
  <script
    src='{{ partialCached "get-enhancements.html" . }}'
    type="module"
    async
    onerror='console.warn("could not load enhancements"); document.body.classList.add("has-old-js");'
  ></script>
  {{ partial "ld-json.html" . }}
</body>
</html>
