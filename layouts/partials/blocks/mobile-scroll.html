<div class="bg-black font-serif">
  <div class="overflow-hidden rounded-t-[40px] bg-g-3 md:rounded-none">
    <div
      class="h-[120px] w-full rounded-t-[40px] bg-white shadow-[inset_0_-2px_0_rgba(0,0,0,0.3)] md:hidden md:rounded-none"
    >
      <div
        class="flex h-[120px] w-full items-center justify-center gap-6 rounded-t-[40px] bg-white shadow-[inset_0_-2px_0_rgba(0,0,0,0.3)] md:hidden md:rounded-none"
      >
        <button
          class="ml-6 flex w-1/2 items-center gap-2 rounded-lg border-2 border-yellow-5 bg-yellow-4 px-6 py-2 font-sans text-xl font-semibold text-yellow-9 transition hover:bg-yellow-3"
        >
          <span>Filter</span>
          <svg class="ml-auto h-5 w-5 fill-yellow-9">
            {{ partial "helper/svg.html" "filter" }}
          </svg>
        </button>
        <button
          class="mr-6 flex w-1/2 items-center gap-2 rounded-lg border-2 border-yellow-5 bg-yellow-4 px-6 py-2 font-sans text-xl font-semibold text-yellow-9 transition hover:bg-yellow-3"
        >
          <span>Sort</span>
          <svg class="ml-auto h-5 w-5 fill-yellow-9">
            {{ partial "helper/svg.html" "chevron" }}
          </svg>
        </button>
      </div>
    </div>

    <div class="mt-3 space-y-3 bg-g-3 pb-3">
      <div id="inspections-loader" class="w-full bg-white p-8 shadow md:p-10">
        <p class="font-sans text-xl font-semibold text-g-7">
          Loading inspectionsâ€¦
        </p>
      </div>

      <div id="inspections-mount"></div>

      <div
        id="no-results"
        class="hidden w-full bg-white p-8 shadow md:p-10"
        aria-live="polite"
      >
        <p class="font-sans text-xl font-semibold text-g-7">
          No results found. Please try a different search.
        </p>
      </div>

      <div
        data-card="inspection"
        data-index="mcdonald's lincoln e hwy downingtown 5/1/2025 1 high risk violation 1 moderate risk violation 1 low risk violation"
        class="w-full space-y-3 bg-white p-8 shadow md:p-10"
      >
        <h2 class="text-3xl font-bold">McDonald's</h2>
        <div class="space-y-1 text-g-6">
          <div class="flex items-center gap-1">
            <svg class="h-4 w-4 flex-shrink-0 fill-g-5">
              {{ partial "helper/svg.html" "location" }}
            </svg>
            <span>Lincoln E HWY, Downingtown</span>
          </div>
          <div class="flex items-center gap-1">
            <svg class="h-4 w-4 flex-shrink-0 fill-g-5">
              {{ partial "helper/svg.html" "calendar-day" }}
            </svg>
            <span>Last inspection: 5/1/2025</span>
          </div>
        </div>
        <ul class="mt-2 space-y-2 text-lg font-semibold">
          <li class="mt-4 flex items-start">
            <svg class="mr-2 mt-1 h-5 w-5 fill-red-7">
              {{ partial "helper/svg.html" "triangle-exclamation" }}
            </svg>
            <span>1 <span>high risk violation</span></span>
          </li>
          <li class="flex items-start">
            <svg class="mr-2 mt-1 h-5 w-5 fill-yellow-4">
              {{ partial "helper/svg.html" "triangle-exclamation" }}
            </svg>
            <span>1 <span>moderate risk violation</span></span>
          </li>
          <li class="flex items-start">
            <svg class="mr-2 mt-1 h-5 w-5 fill-blue-6">
              {{ partial "helper/svg.html" "triangle-exclamation" }}
            </svg>
            <span>1 <span>low risk violation</span></span>
          </li>
        </ul>
        <div class="pt-2">
          <button
            class="relative mt-4 flex w-full items-center justify-center rounded-md border-2 border-yellow-5 bg-yellow-4 px-4 py-3 font-bold text-yellow-9 transition hover:bg-yellow-3"
            aria-label="Read more about this inspection"
          >
            <span class="mx-auto">Read more</span>
            <svg class="absolute right-6 h-5 w-5 fill-yellow-9">
              {{ partial "helper/svg.html" "chevron-right" }}
            </svg>
          </button>
        </div>

        <ul class="violations-data" hidden>
          <li data-level="high">
            <h4>Food Sourcing, Handling, & Storage</h4>
            <p>
              Some kitchen equipment was dirty and needs to be cleaned to
              prevent contamination.
            </p>
          </li>
          <li data-level="moderate">
            <h4>Employee Health & Hygiene</h4>
            <p class="m-0 border-0 border-l-4 border-red-5 pl-4 ring-0">
              An employee did not wash their hands properly, which can spread
              germs to food.
            </p>
          </li>
          <li data-level="low">
            <h4>Facility Management</h4>
            <p>
              Drain pipe from dishwasher is directly in drain on the floor;
              there is no air gap for backflow prevention.
            </p>
          </li>
        </ul>
      </div>

      <div
        data-card="inspection"
        data-index="raku hibachi & sushi inc. reading 4/17/2025 0 violations"
        class="w-full space-y-3 bg-white p-8 shadow md:p-10"
      >
        <h2 class="text-3xl font-bold">Raku Hibachi & Sushi Inc.</h2>
        <div class="space-y-1 text-g-6">
          <div class="flex items-center gap-1">
            <svg class="h-4 w-4 flex-shrink-0 fill-g-5">
              {{ partial "helper/svg.html" "location" }}
            </svg>
            <span>Reading</span>
          </div>
          <div class="flex items-center gap-1">
            <svg class="h-4 w-4 flex-shrink-0 fill-g-5">
              {{ partial "helper/svg.html" "calendar-day" }}
            </svg>
            <span>Last inspection: 4/17/2025</span>
          </div>
        </div>
        <ul class="mt-2 space-y-2 text-lg">
          <li class="mt-4 flex items-start font-semibold">
            <svg class="mr-2 mt-1 h-5 w-5 fill-election-green">
              {{ partial "helper/svg.html" "circle-check" }}
            </svg>
            <span>0 <span>violations</span></span>
          </li>
        </ul>
        <div class="pt-2">
          <button
            class="relative mt-4 flex w-full items-center justify-center rounded-md border-2 border-yellow-5 bg-yellow-4 px-4 py-3 font-bold text-yellow-9 transition hover:bg-yellow-3"
            aria-label="Read more about this inspection"
          >
            <span class="mx-auto">Read more</span>
            <svg class="absolute right-6 h-5 w-5 fill-yellow-9">
              {{ partial "helper/svg.html" "chevron-right" }}
            </svg>
          </button>
        </div>

        <script type="application/json" class="violations-data">
          []
        </script>
      </div>

      <div
        data-card="inspection"
        data-index="panera allentown 3/1/2025 5 moderate risk violations 1 low risk violation"
        class="w-full space-y-3 bg-white p-8 shadow md:p-10"
      >
        <h2 class="text-3xl font-bold">Panera</h2>
        <div class="space-y-1 text-g-6">
          <div class="flex items-center gap-1">
            <svg class="h-4 w-4 flex-shrink-0 fill-g-5">
              {{ partial "helper/svg.html" "location" }}
            </svg>
            <span>Allentown</span>
          </div>
          <div class="flex items-center gap-1">
            <svg class="h-4 w-4 flex-shrink-0 fill-g-5">
              {{ partial "helper/svg.html" "calendar-day" }}
            </svg>
            <span>Last inspection: 3/1/2025</span>
          </div>
        </div>
        <ul class="mt-2 space-y-2 text-lg font-semibold">
          <li class="mt-4 flex items-start">
            <svg class="mr-2 mt-1 h-5 w-5 fill-yellow-4">
              {{ partial "helper/svg.html" "triangle-exclamation" }}
            </svg>
            <span>5 <span>moderate risk violations</span></span>
          </li>
          <li class="flex items-start">
            <svg class="mr-2 mt-1 h-5 w-5 fill-blue-6">
              {{ partial "helper/svg.html" "triangle-exclamation" }}
            </svg>
            <span>1 <span>low risk violation</span></span>
          </li>
        </ul>
        <div class="pt-2">
          <button
            class="relative mt-4 flex w-full items-center justify-center rounded-md border-2 border-yellow-5 bg-yellow-4 px-4 py-3 font-bold text-yellow-9 transition hover:bg-yellow-3"
            aria-label="Read more about this inspection"
          >
            <span class="mx-auto">Read more</span>
            <svg class="absolute right-6 h-5 w-5 fill-yellow-9">
              {{ partial "helper/svg.html" "chevron-right" }}
            </svg>
          </button>
        </div>

        <script type="application/json" class="violations-data">
          []
        </script>
      </div>

      <script>
        (function () {
          const input = document.getElementById("search-input");
          const button = document.getElementById("search-button");
          const cards = Array.from(
            document.querySelectorAll('[data-card="inspection"]'),
          );
          const noResultsEl = document.getElementById("no-results");

          if (!input || !button || cards.length === 0) return;

          function normalize(str) {
            return (str || "")
              .toLowerCase()
              .replace(/[^a-z0-9\s]/g, "")
              .replace(/\s+/g, " ")
              .trim();
          }

          const index = new Map(
            cards.map((card) => {
              const hay = normalize(card.dataset.index || card.textContent);
              return [card, hay];
            }),
          );

          function doSearch() {
            const q = normalize(input.value);
            let matches = 0;

            cards.forEach((card) => {
              const hit = !q || index.get(card).includes(q);
              card.classList.toggle("hidden", !hit);
              if (hit) matches++;
            });

            if (noResultsEl)
              noResultsEl.classList.toggle("hidden", matches !== 0);
          }

          button.addEventListener("click", doSearch);
          input.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
              e.preventDefault();
              button.click();
            }
          });
        })();
      </script>
    </div>
  </div>
</div>
