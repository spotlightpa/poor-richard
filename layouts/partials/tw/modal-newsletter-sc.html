{{ $idEmail := partial "helper/new-id" . | printf "modal-newsletter-%s" }}


<div
  class="fixed inset-0 z-20"
  data-ga-category="modal:newsletter:multi"
  x-data="modal"
  x-cloak
  x-show="isOpen"
  x-transition.opacity
  x-trap.noscroll.inert="isOpen"
  @scroll.window.once.passive="trigger()"
  @click="isOpen = false"
  role="dialog"
  aria-modal="true"
  aria-label="Newsletter sign up"
>
  <div class="absolute inset-0 bg-s-4 opacity-75"></div>
  <div
    class="absolute inset-0 backdrop-blur-sm backdrop-filter"
    x-transition.delay.150ms
  ></div>
  <div
    class="absolute inset-1 flex overflow-y-auto"
    x-show="isOpen"
    x-transition.delay.50ms
  >
    <form
      class="m-auto w-full max-w-prose overflow-hidden rounded-lg text-center font-sans text-s-9 shadow-lg"
      data-ga-form="newsletters:multi"
      action="{{ .Param `newsletters-action` }}"
      method="post"
      target="_blank"
      tabindex="-1"
      @click.stop
      @keydown.escape="isOpen = false"
    >
      {{ partial "newsletter/talkofthetown-hidden.html" . }}
      <header
        class="
          relative flex h-56 flex-none
          justify-between bg-blue-1 bg-cover
          text-white md:h-48
        "
        style="
          background-image: url('https://www.spotlightpa.org/imgproxy/insecure/rt:fill/w:1000/h:750/g:sm/el:1/q:75/ZXh0ZXJuYWwvaHg3Z2gzeTMwZ3MzcW43bXF3cmoyNTliM20uanBlZw==.webp');
          background-position: center;
        "
      >
        <h6
          class="text-shadow absolute bottom-4 text-xl font-bold uppercase leading-tight tracking-wider text-white"
        >
          Get all the top news and notes from State College & north-central PA.
        </h6>

        <p class="absolute top-0 right-0 flex items-center p-4">
          <button
            class="group flex rounded-full text-white hover:text-orange focus:text-s-3"
            type="button"
            aria-label="close"
            x-ref="closer"
            data-ga-action="modal:newsletter:dismiss"
            @keydown.escape="isOpen = false"
            @click="isOpen = false;"
            :autofocus="isOpen"
          >
            <svg
              class="my-auto h-8 w-8 fill-current p-1 opacity-70"
              style="margin-right: -2px;"
            >
              <use href="#close-svg"></use>
            </svg>
          </button>
        </p>
      </header>
      <div class="bg-white px-8 py-4">
        <p class="mt-4 text-lg leading-tight">
          Sign up for
          <b class="uppercase">Spotlight PA’s free weekly newsletter</b> and get
          our exclusive reporting, plus the most important news and events from
          our region.
        </p>
        <div class="mx-auto mt-8 items-stretch sm:flex sm:max-w-2xl">
          <p class="relative flex-grow">
            <label class="sr-only" for="{{ $idEmail }}">Email address</label>
            <input
              id="{{ $idEmail }}"
              class="block w-full appearance-none rounded border-2 border-s-4 bg-white py-2 pl-10 tracking-wider text-s-8 placeholder-s-4 placeholder-opacity-100 outline-none ring-blue-2 focus:ring-2"
              type="email"
              name="EMAIL"
              placeholder="Email address"
              required
            />
            <span
              class="pointer-events-none absolute inset-y-0 left-0 z-10 inline-flex w-10 items-center justify-center leading-none text-s-4"
              aria-hidden="true"
            >
              <svg class="h-4 w-4 fill-current">
                <use href="#email-svg"></use>
              </svg>
            </span>
          </p>
        </div>
        <button
          class="mt-6 rounded bg-orange px-8 py-2 font-semibold uppercase tracking-wider text-white hover:shadow"
          type="submit"
        >
          Sign me up
        </button>
        <p class="mt-5 flex space-x-2">
          <button
            class="flex-grow text-s-6 hover:underline"
            aria-label="close"
            type="button"
            @click="
                $dispatch('x-form-submit', 'newsletters:seenit:submit');
                isOpen = false
              "
          >
            I’m already a subscriber
          </button>
          <button
            class="flex-grow text-s-6 hover:underline"
            aria-label="close"
            type="button"
            @click="isOpen = false"
          >
            No thanks
          </button>
        </p>
      </div>
    </form>
  </div>
</div>
