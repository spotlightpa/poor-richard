<section class="bg-white px-6 pb-6 pt-16" data-ga-category="header">
  <div
    class="
    mx-auto flex w-full max-w-screen-xl flex-wrap gap-4 md:gap-x-6 lg:gap-x-12
  "
  >
    <h1
      class="w-full pb-2 font-sans text-4xl font-bold leading-tight text-black lg:text-5xl"
    >
      {{ .Title }}
    </h1>
    <div class="md:w-4/6 md:flex-1">
      <h2
        class="mx-auto w-0 min-w-full font-sans text-xl font-semibold md:text-2xl md:leading-tight"
      >
        {{ .Param "dek" }}
      </h2>

      {{ with .Content }}
        <div
          class="article-content w-full max-w-prose overflow-hidden leading-relaxed"
          data-ga-category="content"
        >
          {{ . }}
        </div>
      {{ end }}

    </div>
    {{ .Page.RenderString (.Param "sidebar") }}

  </div>
</section>

<section class="bg-white px-6 py-6"></section>

<section
  class="top-0 z-20 hidden bg-white shadow-md lg:sticky lg:block"
  data-ga-category="internal-nav"
>
  {{ partial "tw/internal-page-nav.html" . }}


  <div class="no-js:hidden relative mx-auto w-96 max-w-full md:hidden">
    <select
      x-data
      @change="
        window.location.assign($event.target.value);
        $report({
          target: $el,
          currentTarget: window.location,
        });
      "
      class="spl-select text-2xl"
    >
      <option disabled selected>Jump to…</option>
      {{ range .Param "internal-links" }}
        <option value="{{ .link }}">{{- .title -}}</option>
      {{ end }}
    </select>
    <span
      class="pointer-events-none absolute inset-y-0 right-3 z-10 inline-flex items-center justify-center leading-none text-s-6"
      aria-hidden="true"
    >
      <svg class="h-4 w-4 fill-s-5">
        {{ partial "helper/svg.html" "chevron" }}
      </svg>
    </span>
  </div>
</section>

<section
  class="bg-white px-6 py-8"
  id="guides"
  data-ga-category="guides"
  x-data
  x-intersect.half="$dispatch('intersect:about', $el.id)"
>
  {{ $guide := site.GetPage "content/series/voting-guides-2023/_index.md" }}
  {{ partial "tw/list-3-col-story.html" (dict
    "hed" "PA Primary Election 2023: Candidate and Voting Guides"
    "pages" $guide.RegularPages
    "readMoreLink" $guide.RelPermalink
    "readMore" "Read More PA Election 2023 Guides"
    "rows" 2
    )
  }}
</section>

{{ range $i, $blocks := .Params.blocks }}
  {{ $id := urlize .title }}
  {{ partial "blocks/block" (dict "Page" $ "block" .) }}
{{ end }}


<section class="bg-white p-6" data-ga-category="inline-newsletter">
  <div class="mx-auto max-w-screen-md">
    {{ partial "tw/inline-newsletter-box" . }}
  </div>
</section>

<section class="bg-white px-6 py-8" id="coverage" data-ga-category="coverage">
  {{ $elex := site.GetPage "content/topics/elections/_index.md" }}

  {{ $pages := $elex.RegularPages }}
  {{ partial "tw/list-3-col-story.html" (dict
    "hed" "PA Primary Election 2023: More Coverage"
    "pages" $pages
    "readMoreLink" $elex.RelPermalink
    "readMore" "Read More PA Election 2023 Stories"
    "rows" 2
    )
  }}
</section>

{{ $espan := site.GetPage "content/topics/español/_index.md" }}
{{ $primary := (time "2023-03-28").Unix }}
{{ $newEspan := where $espan.RegularPages
  ".PublishDate.Unix" "gt" $primary
}}
{{ if $newEspan }}
  <section
    class="bg-white px-6 py-8 md:py-16"
    id="espan"
    data-ga-category="espanol"
  >
    {{ partial "tw/list-3-col-story.html" (dict
      "hed" "Elecciones Pa. 2023: Traducciones al Español"
      "pages" $newEspan
      "readMoreLink" $espan.RelPermalink
      "readMore" "Leer Más Historias De La Elección PA 2023"
      "rows" 1
      )
    }}
  </section>
{{ end }}


<div id="contact" class="-mx-4 bg-s-3 font-sans md:mx-0 md:px-4">
  {{ .Page.RenderString (.Param "form") }}
</div>

<section class="bg-white p-6" data-ga-category="credits" id="credits">
  <div class="mx-auto w-full max-w-prose">
    <h2
      class="border-b-4 border-black pb-2 font-sans text-xl font-extrabold uppercase leading-none tracking-wider"
    >
      Credits
    </h2>
    <div class="space-y-12 py-8">
      {{ .Page.RenderString (.Param "credits") }}
    </div>
  </div>
</section>

<script src="https://www.spotlightpa.org/embed.js" async></script>
<script
  src="https://viz-redistricting-2020.data.spotlightpa.org/embed.js"
  defer
></script>

{{ range .Param "dates" }}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Event",
      "name": "{{ .name }}",
      "startDate": "{{ .date }}",
      "endDate": "{{ .date }}",
      "eventStatus": "eventScheduled",
      "location": {
        "@type": "Place",
        "name": "Pennsylvania",
        "address": {
          "@type": "PostalAddress",
          "addressRegion": "PA"
        }
      }
    }
  </script>
{{ end }}
