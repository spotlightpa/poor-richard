{{ $thumbClass := .thumbClass | default `w-full` }}
{{ $storyClass := .storyClass | default `w-full flex-grow` }}
{{ $hedSize := .hedSize | default `text-base sm:text-lg font-semibold` }}
{{ $dekSize := .dekSize | default `text-sm sm:text-base` }}
{{ $eyebrowColor := .eyebrowColor | default `bg-eyebrow-bg text-eyebrow border-eyebrow-bg` }}
{{ $eyebrowClass := .eyebrowClass | default `inline-block px-2 font-sans text-xs font-semibold uppercase border-2 md:text-sm` }}
{{ $hedColor := .hedColor | default `text-hed` }}
{{ $linkColor := .linkColor | default `text-dek ` }}
{{ $subitemSize := .subitemSize | default `` }}

{{ $showByline := .showByline | default true }}


<article class="{{ .wrapperClass }}">
  <div data-ga-category="eyebrow">
    {{ if .eyebrow }}
      {{ partial "tag/maybe-link.html" (dict
        "link" .rubricLink
        "eyebrowColor" $eyebrowColor
        "eyebrowClass" $eyebrowClass
        "text" .eyebrow
        )
      -}}
    {{ end }}
  </div>

  <div class="{{ $thumbClass }}">
    {{ partial "tw/image-block.html" .imgOpts }}
  </div>
  <div class="group mt-3">
    <h3 class="{{ $hedSize }} leading-tight text-hed">
      <a
        class="group-hover:underline"
        href="{{ .link }}"
        data-ga-category="hed"
      >
        {{ .hed }}
      </a>
    </h3>
    {{ if .dek }}
      <h4 class="{{ $dekSize }} mt-2 font-sans text-dek">
        <a
          href="{{ .link }}"
          class="group-hover:underline"
          data-ga-category="dek"
        >
          {{- .dek -}}
        </a>
      </h4>
    {{ end }}
    {{ if ( and ( .byline ) ( $showByline ) ) }}
      <h4
        class="mt-2 font-sans text-base font-normal leading-tight tracking-normal text-blue"
      >
        <a
          href="{{ .link }}"
          class="group-hover:underline"
          data-ga-category="byline"
        >
          {{- printf "by %s" .byline -}}
        </a>
      </h4>
    {{ end }}

    {{- if .showDate }}
      <h3
        class="font-sans text-base font-light leading-tight tracking-normal text-date"
        data-ga-category="time"
      >
        <a href="{{ .link }}" class="group-hover:underline">
          <time datetime="{{ .dateISO }}">
            {{- .date }}
          </time>
        </a>
      </h3>
    {{- end -}}
  </div>
  {{ if .subitems }}
    <h4
      class="mt-9 text-left font-sans text-base font-bold uppercase leading-none tracking-wider text-black"
    >
      Related Stories
    </h4>
    <ul
      class="list-outside space-y-3 border-b border-black pb-10 pt-2 font-sans font-light"
    >
      {{ range .subitems }}
        <li class="ml-4 list-[square] leading-snug tracking-normal text-g-8">
          <a
            href="{{ .link }}"
            class="{{ $linkColor }} underline-offset-2 hover:underline"
            data-ga-category="subfeature"
          >
            {{ .title }}
          </a>
        </li>
      {{ end }}
    </ul>
  {{ end }}
</article>
