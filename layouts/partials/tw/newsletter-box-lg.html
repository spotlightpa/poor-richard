{{ $idEmail := partial "helper/new-id" . | printf "footer-newsletter-%s" }}
{{ $newsletterAction := site.Param "newsletters-action" }}
{{ $title := .newsletterHed }}
{{ $dek := .newsletterDek }}
{{ $showLogo := .showLogo }}
{{ $wrapperStyle := .newsletterWrapper | default `p-4 sm:py-8 md:py-12` }}
{{ $actionColor := .actionColor | default "#FFCB05" }}


<div class="{{ $wrapperStyle }} bg-black font-sans">
  {{ with $showLogo }}
    <h2 class="mb-8 flex items-end justify-center gap-8">
      <a
        class="flex w-3/5 max-w-xs text-white hover:text-yellow md:w-1/2 md:max-w-md"
        href="/"
      >
        <svg class="aspect-[16/3] w-full fill-current">
          <title>Home</title>
          <desc>Spotlight PA logo</desc>
          {{ partial "helper/svg.html" "banner" }}
        </svg>
      </a>
    </h2>
  {{ end }}
  {{ with $title }}
    <h3
      class="text-center text-2xl font-bold leading-tight tracking-wide text-white md:text-4xl"
    >
      {{ . }}
    </h3>
  {{ end }}
  <p
    class="mx-auto mb-7 mt-4 text-center text-lg font-semibold leading-relaxed tracking-wide text-white sm:max-w-lg md:max-w-2xl md:px-6 md:text-xl lg:text-2xl"
  >
    {{ $dek }}
  </p>

  <form
    class=" mx-auto max-w-xl md:max-w-2xl"
    x-form="newsletters:multi"
    x-data="{ hasFocused: false }"
    action="{{ $newsletterAction }}"
    method="post"
    target="_blank"
  >
    {{ partial "newsletter/basic-hidden.html" . }}
    <div
      class="relative mt-5 flex flex-wrap items-stretch justify-start gap-2 sm:flex-nowrap sm:items-center sm:gap-0 md:col-start-1 md:col-end-3"
    >
      <label class="sr-only" for="{{ $idEmail }}">Email address</label>
      <input
        id="{{ $idEmail }}"
        class="m-1 box-content w-full appearance-none rounded rounded-bl rounded-tl bg-white p-3 font-bold tracking-wider text-g-8 placeholder-g-6 placeholder-opacity-100 shadow-[0_0_0_4px] shadow-yellow outline-none ring-yellow-9 focus:ring-2 sm:w-7/12 sm:rounded-br-none sm:rounded-tr-none"
        @focus.once="hasFocused = true"
        type="email"
        name="EMAIL"
        placeholder="Email address"
        required
      />

      <button
        class="m-1 box-border w-full rounded bg-yellow p-3 font-black uppercase tracking-wider text-yellow-9 shadow-[0_0_0_4px] shadow-yellow sm:w-5/12 sm:rounded-b sm:rounded-t-none sm:rounded-bl-none sm:rounded-tr md:px-8"
        type="submit"
      >
        Sign Up
      </button>
    </div>
    <div
      class="col-span-3 col-start-1 mt-8 text-white"
      x-cloak
      x-show="hasFocused"
      x-transition:enter="transition ease-in-out duration-300"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
      x-transition:leave="transition ease-in duration-300"
      x-transition:leave-start="opacity-100"
      x-transition:leave-end="opacity-0"
    >
      {{ $checkClass := `accent-orange` }}
      <p class="mt-1 text-left">
        <label class="flex items-baseline">
          <input
            type="checkbox"
            class="flex-0 mr-3 h-4 w-4 rounded border border-black p-1 accent-yellow hover:accent-blue-4"
            name="papost"
            value="1"
            checked
            x-report-click
            data-ga-category="toggle-newsletter:papost"
          />
          <span class="flex-1"
            ><strong>PA Post (Daily)</strong>: Top news every weekday morning,
            plus a daily puzzle.</span
          >
        </label>
      </p>
      <p class="mt-1 text-left">
        <label class="flex items-baseline">
          <input
            type="checkbox"
            class="flex-0 mr-3 h-4 w-4 rounded border border-black p-1 accent-yellow hover:accent-blue-4"
            name="investigator"
            value="1"
            checked
            x-report-click
            data-ga-category="toggle-newsletter:investigator"
          />
          <span class="flex-1"
            ><strong>The Investigator (Weekly)</strong>: Best accountability
            journalism every Thursday, plus a weekly riddle.</span
          >
        </label>
      </p>
      <p class="mt-1 text-left">
        <label class="flex items-baseline">
          <input
            type="checkbox"
            class="flex-0 mr-3 h-4 w-4 rounded border border-black p-1 accent-yellow hover:accent-blue-4"
            name="palocal"
            value="1"
            checked
            x-report-click
            data-ga-category="toggle-newsletter:palocal"
          />
          <span class="flex-1"
            ><strong>PA Local (Weekly)</strong>: A fresh look at the incredible
            people, places, and food of Pa. every Friday.</span
          >
        </label>
      </p>
    </div>
  </form>
</div>
