{{ $pages := slice }}


<section class="bg-white px-6 pt-16 pb-4">
  <h1 class="text-center text-4xl font-semibold leading-none md:text-6xl">
    {{ .Title }}
  </h1>
  <h2
    class="mt-3 text-center text-3xl font-semibold leading-none text-g-6 md:text-4xl"
  >
    {{ .Param "dek" }}
  </h2>
</section>

<section class="bg-white px-6 py-4">
  <nav class="">
    <ul class="mx-auto flex flex-wrap items-stretch justify-center gap-4">
      {{ range $i, $_ := .Param "links" }}
        <li class="contents">
          <a
            class="block whitespace-nowrap rounded-sm bg-election-green p-4 font-sans font-semibold text-white shadow hover:bg-election-green-lighter"
            href="{{ .link }}"
          >
            {{- .title -}}
          </a>
        </li>
      {{ end }}
    </ul>
  </nav>
</section>

<section class="bg-white px-6 py-2">
  <div class="article-content mx-auto max-w-prose leading-relaxed">
    {{ .Content }}
  </div>
</section>

<section class="bg-white px-6 py-2">
  <nav class="text-center text-lg font-semibold uppercase">
    {{ range $i, $item := .Param "internal-links" -}}
      {{- if ne $i 0 }}
        {{ if modBool $i 4 }}
          <br />
        {{ else }}
          <span class="mx-2 inline-block h-0 border-l-4 border-g-6 text-g-7"
            >|</span
          >
        {{ end }}
      {{ end -}}
      <a
        href="{{ .link }}"
        class="underline-l decoration-4 underline-offset-4 hover:decoration-yellow"
      >
        {{- .title -}}
      </a>
    {{- end }}
  </nav>
</section>

<script src="https://www.spotlightpa.org/embed.js" async></script>

<section class="bg-white px-6 py-2">
  <div class="mx-auto max-w-prose">
    <div
      data-spl-embed-version="1"
      data-spl-src="https://www.spotlightpa.org/embeds/donate/"
    ></div>
  </div>
</section>

<section
  id="dates"
  x-data='{
      url: "https://unpkg.com/add-to-calendar-button@1.14.6/npm_dist/mjs/index.js",
      data(el) {
        return {
          name: el.dataset.name,
          startDate: el.dataset.date,
          endDate: el.dataset.date,
          options: ["Apple", "Google", "Outlook.com"],
          timeZone: "America/New_York",
          listStyle: "modal",
          iCalFileName: el.dataset.name,
        };
      },
    }'
  @mouseover.once="import(url)"
  class="bg-white p-6 text-center"
>
  <h2 class="font-sans text-3xl font-bold uppercase leading-none tracking-wide">
    Key Dates
  </h2>
  <ul class="mt-4 flex flex-col gap-3">
    {{ range .Param "dates" }}
      <li class="flex items-center justify-center gap-2 leading-none">
        <span class="text-lg">
          <em class="font-bold not-italic"> {{- .dateVerbose -}} </em>,
          {{ .name }}
        </span>
        <button
          @click.prevent="
            import(url).then((m) => m.atcb_action(data($el), $el))
          "
          class="flex items-baseline gap-1 border-b-4 border-transparent font-sans font-semibold text-g-6 hover:border-yellow"
          type="button"
          data-name="{{ .name }}"
          data-date="{{ .date }}"
        >
          <svg class="inline-block h-4 w-4 fill-current">
            <use href="#calendar-svg" />
          </svg>
          <span>Add to Calendar</span>
        </button>
      </li>
    {{ end }}
  </ul>
</section>

{{ range .Param "dates" }}
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Event",
      "name": "{{ .name }}",
      "startDate": "{{ .date }}",
      "endDate": "{{ .date }}",
      "location": {
        "@type": "Place",
        "address": {
          "@type": "PostalAddress",
          "addressRegion": "PA"
        }
      }
    }
  </script>
{{ end }}


<script
  src="https://stage--viz-redistricting-2020.netlify.app/embed.js"
  defer
></script>

<section class="bg-white p-6" id="ballot">
  <div class="mx-auto flex max-w-screen-lg">
    <div
      class="w-full"
      data-spl-interactive="viz-redistricting-2020"
      data-spl-path="/district-finder"
    ></div>
  </div>
</section>

<section class="bg-white p-6" id="guides">
  {{ $guide := site.GetPage "content/news/2022-09-12-SPLGUVGUIDE.md" }}
  {{ $stories := slice $guide }}
  {{ partial "tw/list-three-h.html" (dict
    "hed" "Election Guides from Spotlight PA"
    "pages" $stories
    )
  }}
</section>

<section class="bg-white p-6" id="issues">
  {{ $onetwo := site.GetPage "content/series/one-vote-two-pennsylvanias/_index.md" }}
  {{ partial "tw/list-three-h.html" (dict
    "hed" "Issues Coverage from Spotlight PA"
    "pages" $onetwo.RegularPages
    "readMoreLink" $onetwo.RelPermalink
    )
  }}
</section>

<section class="bg-white px-6">
  <div class="mx-auto max-w-prose">
    <div
      data-spl-embed-version="1"
      data-spl-src="https://www.spotlightpa.org/embeds/newsletter/"
    ></div>
  </div>
</section>

<section class="bg-white p-6" id="coverage">
  {{ $elex := site.GetPage "content/topics/elections/_index.md" }}
  {{ partial "tw/list-three-h.html" (dict
    "hed" "Election Coverage from Spotlight PA"
    "pages" $elex.RegularPages
    "readMoreLink" $elex.RelPermalink
    )
  }}
</section>

<section class="bg-white p-6" id="espan">
  {{ $espan := site.GetPage "content/topics/español/_index.md" }}
  {{ partial "tw/list-three-h.html" (dict
    "hed" "Spanish Translations from Spotlight PA"
    "pages" $espan.RegularPages
    "readMoreLink" $espan.RelPermalink
    )
  }}
</section>

<section class="bg-white p-6" id="money">
  <h2
    class="text-center font-sans text-3xl font-bold uppercase leading-none tracking-wide"
  >
    Follow the money
  </h2>
  <h3
    class="mt-3 text-center font-sans text-lg font-semibold leading-none text-g-6"
  >
    Lorem ipsum dolor sit amet, consectetur adipisicing elit
  </h3>
  <div class="mt-8 flex gap-6">
    <div class="mx-auto max-w-screen-sm flex-1">
      <iframe
        x-data="{ src: '' }"
        x-intersect.margin.200px="src = $el.dataset.src"
        :src="src"
        data-src="https://flo.uri.sh/visualisation/11123651/embed"
        title="Donors to Doug Mastriano"
        class="flourish-embed-iframe bg-g-5"
        frameborder="0"
        scrolling="no"
        style="display: block; width: 100%; height: 600px;"
        sandbox="allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"
      ></iframe>
    </div>
    <div class="mx-auto max-w-screen-sm flex-1">
      <iframe
        x-data="{ src: '' }"
        x-intersect.margin.200px="src = $el.dataset.src"
        :src="src"
        data-src="https://flo.uri.sh/visualisation/11123875/embed"
        title="Donors to Josh Shapiro"
        class="flourish-embed-iframe bg-g-5"
        frameborder="0"
        scrolling="no"
        style="display: block; width: 100%; height: 600px;"
        sandbox="allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"
      ></iframe>
    </div>
  </div>
</section>

<section class="bg-white p-6" id="contact">
  <div class="mx-auto max-w-prose">
    <h2
      class="border-b-4 border-black pb-2 font-sans text-xl font-extrabold uppercase leading-none tracking-wider"
    >
      Ask Us Your Questions
    </h2>
  </div>
  <div class="mx-auto max-w-prose">
    <div
      data-spl-embed-version="1"
      data-spl-src="https://www.spotlightpa.org/embeds/tips/?flag_text=ELECTION%202022&tip_text=Spotlight%20PA%20is%20covering%20Pennsylvania's%202022%20gubernatorial%20and%20legislative%20elections%20%E2%80%94%20and%20we%20want%20you%20to%20help%20shape%20our%20stories.%20%3Cb%3ETell%20us%20what%20you%20want%20to%20know%20about%20those%20races%2C%20and%20send%20us%20any%20questions%20you%20have%20about%20the%20voting%20system.%3C%2Fb%3E%20Use%20the%20form%20below%20to%20reach%20our%20election%20team.&form_name=elections-embed"
    ></div>
  </div>
</section>
