<div
  x-data="{ hasFocused: false }"
>
  <form
    class="box no-js-hide"
    action="https://email-alerts.data.spotlightpa.org/api/add-contact"
    method="post"
    autocomplete="on"
    data-ga-form="newsletters:covid-alerts"
    data-ga-category="newsletters:covid-alerts"
    target="_parent"
  >
    <h2 class="title is-6 has-text-danger has-text-left is-uppercase">
      COVID-19 Alerts
    </h2>
    <h2 class="title is-4 has-text-centered">
      Sign up for a free weekly update with the latest coronavirus numbers customized for your county.
    </h2>
    <input
      type="hidden"
      name="redirect"
      value="https://www.spotlightpa.org/newsletters/thanks/"
    >
    <input
      type="hidden"
      name="redirect_sorry"
      value="https://www.spotlightpa.org/newsletters/sorry/"
    >
    <div class="field">
      <div class="control">
        <label class="is-sr-only" for="alert-email">
          Email address
        </label>
        <p class="control has-icons-left has-icons-right is-expanded">
          <input
            id="alert-email"
            type="email"
            name="email"
            autocomplete="email"
            class="input"
            required
            placeholder="Email address"
            @focus.once="hasFocused = true"
          >
          <span class="icon is-left">
            <svg>
              <use href="#email-svg">
              </use>
            </svg>
          </span>
          <span class="icon is-right validator-icon">
            <svg>
              <use href="#check-svg">
              </use>
            </svg>
          </span>
        </p>
      </div>
    </div>
    <div
      class="mb-2"
      :class="!hasFocused ? 'is-hidden' : ''"
      x-cloak
    >
      <div class="field-body">
        <div class="field">
          <label class="is-sr-only" for="alert-fname">
            First Name
          </label>
          <p class="control has-icons-right">
            <input
              id="alert-fname"
              type="text"
              name="first_name"
              autocomplete="given-name"
              class="input"
              required
              placeholder="First name"
            >
            <span class="icon is-right validator-icon">
              <svg>
                <use href="#check-svg">
                </use>
              </svg>
            </span>
          </p>
        </div>
        <div class="field">
          <label class="is-sr-only" for="alert-lname">
            Last Name
          </label>
          <p class="control has-icons-right">
            <input
              id="alert-lname"
              type="text"
              name="last_name"
              autocomplete="family-name"
              class="input"
              required
              placeholder="Last name"
            >
            <span class="icon is-right validator-icon">
              <svg>
                <use href="#check-svg">
                </use>
              </svg>
            </span>
          </p>
        </div>
      </div>
    </div>
    <div
      class="mb-2"
      :class="!hasFocused ? 'is-hidden' : ''"
      x-cloak
    >
      <div class="control">
        <label>
          <span class="label">
            Select your county
          </span>
          <div class="select is-fullwidth">
            <select required name="fips">
              <option
                value=""
                selected
                disabled
              >Pennsylvania counties</option>
              {{ range site.Data.counties }}
                <option value="{{ .FIPS }}">
                  {{ .name }}
                </option>
              {{ end }}
            </select>
          </div>
        </label>
      </div>
    </div>
    <div class="field">
      <p class="control">
        <button
          class="button is-medium is-danger has-text-weight-semibold is-fullwidth"
          type="submit"
        >
          Sign up
        </button>
      </p>
    </div>
  </form>
</div>
