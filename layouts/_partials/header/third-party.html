{{ if hugo.IsProduction }}
  {{ $gtmID := .Param "googleAnalytics" }}
  {{ if not $gtmID }}
    {{ errorf "no google ID!" }}
  {{ end }}
  <script>
    var s = document.createElement("script");
    s.src = "https://www.googletagmanager.com/gtm.js?id={{ $gtmID }}";
    s.async = true;
    document.head.appendChild(s);
  </script>

  <noscript>
    <iframe
      x-cloak
      src="https://www.googletagmanager.com/ns.html?id={{ $gtmID }}"
    ></iframe>
  </noscript>

  <!-- ActiveCampaign -->
  <script>
    (function (e, t, o, n, p, r, i) {
      e.visitorGlobalObjectAlias = n;
      e[e.visitorGlobalObjectAlias] =
        e[e.visitorGlobalObjectAlias] ||
        function () {
          (e[e.visitorGlobalObjectAlias].q =
            e[e.visitorGlobalObjectAlias].q || []).push(arguments);
        };
      e[e.visitorGlobalObjectAlias].l = new Date().getTime();
      r = t.createElement("script");
      r.src = o;
      r.async = true;
      i = t.getElementsByTagName("script")[0];
      i.parentNode.insertBefore(r, i);
    })(
      window,
      document,
      "https://diffuser-cdn.app-us1.com/diffuser/diffuser.js",
      "vgo",
    );
    vgo("setAccount", "226760423");
    vgo("setTrackByDefault", true);

    vgo("process");
  </script>
  <!-- End ActiveCampaign -->
{{ end }}

{{ if .Param "modal-exclude" | not }}
  <!-- Fundraise Up: the new standard for online giving -->
  <script>
    (function (w, d, s, n, a) {
      if (!w[n]) {
        var l = "call,catch,on,once,set,then,track".split(","),
          i,
          o = function (n) {
            return "function" == typeof n
              ? o.l.push([arguments]) && o
              : function () {
                  return o.l.push([n, arguments]) && o;
                };
          },
          t = d.getElementsByTagName(s)[0],
          j = d.createElement(s);
        j.async = !0;
        j.src = "https://cdn.fundraiseup.com/widget/" + a + "";
        t.parentNode.insertBefore(j, t);
        o.s = Date.now();
        o.v = 4;
        o.h = w.location.href;
        o.l = [];
        for (i = 0; i < 7; i++) o[l[i]] = o(l[i]);
        w[n] = o;
      }
    })(window, document, "script", "FundraiseUp", "AMFMKDLA");
  </script>
  <!-- End Fundraise Up -->
  <!-- Wisepops -->
  <script>
    (function (w, i, s, e) {
      window[w] =
        window[w] ||
        function () {
          (window[w].q = window[w].q || []).push(arguments);
        };
      window[w].l = Date.now();
      s = document.createElement("script");
      e = document.getElementsByTagName("script")[0];
      s.defer = 1;
      s.src = i;
      e.parentNode.insertBefore(s, e);
    })("wisepops", "https://wisepops.net/loader.js?v=3&h=AC5Pt5gYk3");
  </script>
  <!-- End Wisepops -->
{{ end }}
