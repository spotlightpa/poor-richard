{{ $src := .Get "src" }}
{{ $width := .Get "width" | int }}
{{ $height := .Get "height" | int }}
{{ $pb := div (mul 100.0 $height) $width }}

{{ $caption := .Get "caption" | htmlUnescape }}
{{ $capClass := .Get "caption-class" | htmlUnescape | default "max-w-content mx-auto text-g-7 text-sm mt-4" }}
{{ $credit := .Get "credit" | htmlUnescape }}

<aside
  class="mt-12 mx-auto"
>
  <figure>
    <div
      class="relative w-full h-0"
      style='padding-bottom: {{ $pb | printf "%0.3f" }}%;'
    >
      <iframe
        class="absolute inset-0 w-full h-full"
        src='{{ $src }}'
        frameborder='0'
        scrolling='no'
        sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'
      ></iframe>
    </div>
    {{ if or $caption $credit }}
      <figcaption class="{{ $capClass }}">
        {{ $caption }}
        {{if $credit }}({{ $credit }}){{ end }}
      </figcaption>
    {{ end }}
  </figure>
</aside>
